"use strict";(self.webpackChunkbjj_app=self.webpackChunkbjj_app||[]).push([[214],{9214:(O,f,n)=>{n.r(f),n.d(f,{UsersModule:()=>M});var d=n(6814),r=n(6223),a=n(4581),Z=n(8525),c=n(2032),g=n(5986),h=n(9157),U=n(324),t=n(5879),l=n(3076),p=n(6472),b=n(684);const v=function(o){return[o]};function q(o,u){if(1&o&&(t.TgZ(0,"li",11)(1,"div",12)(2,"div",13),t._uU(3),t.qZA(),t.TgZ(4,"div",14),t._uU(5),t.qZA(),t.TgZ(6,"div",15),t._uU(7),t.ALo(8,"truncateWords"),t.qZA(),t.TgZ(9,"div",16),t._uU(10),t.qZA()()()),2&o){const e=u.$implicit,i=u.index,s=t.oxw(2);t.Q6J("routerLink",t.VKq(8,v,"./user/"+e._id)),t.xp6(3),t.Oqu(15*(s.page-1)+i+1),t.xp6(2),t.AsE("",e.name," ",e.lastName,""),t.xp6(2),t.Oqu(t.lcZ(8,6,e.type)),t.xp6(3),t.Oqu(e.role)}}function _(o,u){if(1&o){const e=t.EpF();t.TgZ(0,"pagination-controls",19),t.NdJ("pageChange",function(s){t.CHM(e);const m=t.oxw(3);return t.KtG(m.page=s)}),t.qZA()}}function A(o,u){if(1&o&&(t.TgZ(0,"div",17),t.YNc(1,_,1,0,"pagination-controls",18),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",0!=e.total)}}const T=function(o,u){return{itemsPerPage:15,currentPage:o,totalItems:u}};function x(o,u){if(1&o&&(t.TgZ(0,"section",7)(1,"ul",8),t.YNc(2,q,11,10,"li",9),t.ALo(3,"paginate"),t.qZA(),t.YNc(4,A,2,1,"div",10),t.qZA()),2&o){const e=t.oxw();t.xp6(2),t.Q6J("ngForOf",t.xi3(3,2,e.users,t.WLB(5,T,e.page,e.total))),t.xp6(2),t.Q6J("ngIf",e.users)}}let y=(()=>{class o{constructor(e){this.userService=e,this.error=null,this.users=[],this.total=0,this.page=1}ngOnInit(){this.fetchUsers()}fetchUsers(){this.userService.getusers().subscribe({next:e=>{this.users=e,this.total=this.users.length},error:e=>{console.error("Error al cargar los programas",e),this.error="Error al cargar los programas"}})}static#t=this.\u0275fac=function(i){return new(i||o)(t.Y36(l.K))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-users"]],decls:10,vars:1,consts:[[1,"admin-container"],[1,"admin-top-menu"],[1,"admin-top-menu-logo"],["src","../../../../assets/img/legion-logo.png","alt",""],[1,"admin-top-menu-buttons"],["routerLink","./new-user/",1,"button"],["class","table-container",4,"ngIf"],[1,"table-container"],[1,"table-list"],[3,"routerLink",4,"ngFor","ngForOf"],["class","p-controls",4,"ngIf"],[3,"routerLink"],[1,"item-box"],[1,"item-index-number","item-xsmall"],[1,"items","item-medium"],[1,"items","item-large"],[1,"items","item-small"],[1,"p-controls"],[3,"pageChange",4,"ngIf"],[3,"pageChange"]],template:function(i,s){1&i&&(t.TgZ(0,"section",0)(1,"section",1)(2,"div",2),t._UZ(3,"img",3),t.TgZ(4,"h2"),t._uU(5,"Flow305 Staff"),t.qZA()(),t.TgZ(6,"div",4)(7,"button",5),t._uU(8,"New Coach"),t.qZA()()(),t.YNc(9,x,5,8,"section",6),t.qZA()),2&i&&(t.xp6(9),t.Q6J("ngIf",s.users))},dependencies:[d.sg,d.O5,a.rH,p.LS,p._s,b.d]})}return o})(),C=(()=>{class o{constructor(e,i,s){this.formBuilder=e,this.router=i,this.userService=s,this.newUserForm=this.formBuilder.group({active:[!0,r.kI.required],address:[""],address2:[""],athletes:[[]],city:[""],dateSignedIn:[new Date,r.kI.required],dob:[""],email:["",[r.kI.required,r.kI.email]],emailVerified:[!0],lastName:["",r.kI.required],name:["",r.kI.required],phone:[""],photoURL:[""],role:["MEMBER",r.kI.required],signature:[""],state:[""],status:["active",r.kI.required],type:["professor",r.kI.required],bio:[""],todo:[""],waiver:[!0,r.kI.required],zip:[""],password:["",[r.kI.required,r.kI.minLength(6)]]})}onSubmit(){this.newUserForm.valid?this.userService.createuser(this.newUserForm.value).subscribe(()=>{console.log("new user created"),this.router.navigate(["/admin/dashboard/users"])}):console.error("Formulario no v\xe1lido")}static#t=this.\u0275fac=function(i){return new(i||o)(t.Y36(r.qu),t.Y36(a.F0),t.Y36(l.K))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-new-user"]],decls:77,vars:1,consts:[[1,"admin-container"],[1,"admin-top-menu"],[1,"admin-top-menu-logo"],["src","../../../../assets/img/legion-logo.png","alt",""],[1,"admin-top-menu-buttons"],["routerLink","/admin/dashboard/users",1,"button"],["autocomplete","off",1,"form-new-add",3,"formGroup","ngSubmit"],[1,"form-new-add-top"],[1,"form-group"],["for","name"],["type","text","id","name","formControlName","name","matInput","","required","",1,"form-control"],["for","lastName"],["type","text","id","lastName","formControlName","lastName","matInput","","required","",1,"form-control"],["for","email"],["type","email","id","email","formControlName","email","matInput","","required","",1,"form-control"],["for","password"],["type","password","id","password","formControlName","password","matInput","","required","",1,"form-control"],["for","role"],["type","text","id","role","formControlName","role","matInput","","required","",1,"form-control"],["for","type"],["type","text","id","type","formControlName","type","matInput","","required","",1,"form-control"],["for","status"],["type","text","id","status","formControlName","status","matInput","","required","",1,"form-control"],["for","address"],["type","text","id","address","formControlName","address","matInput","",1,"form-control"],["for","address2"],["type","text","id","address2","formControlName","address2","matInput","",1,"form-control"],["for","city"],["type","text","id","city","formControlName","city","matInput","",1,"form-control"],["for","state"],["type","text","id","state","formControlName","state","matInput","",1,"form-control"],["for","zip"],["type","text","id","zip","formControlName","zip","matInput","",1,"form-control"],["for","phone"],["type","tel","id","phone","formControlName","phone","matInput","",1,"form-control"],["for","dob"],["type","date","id","dob","formControlName","dob","matInput","",1,"form-control"],[1,"form-group","form-group-texterea"],["for","bio"],["name","bio","id","bio","formControlName","bio"],["for","todo"],["name","todo","id","todo","formControlName","todo"],["type","submit",1,"submit-button"]],template:function(i,s){1&i&&(t.TgZ(0,"section",0)(1,"section",1)(2,"div",2),t._UZ(3,"img",3),t.TgZ(4,"h2"),t._uU(5,"New Coach or Professor"),t.qZA()(),t.TgZ(6,"div",4)(7,"button",5),t._uU(8,"Back"),t.qZA()()(),t.TgZ(9,"form",6),t.NdJ("ngSubmit",function(){return s.onSubmit()}),t.TgZ(10,"section",7)(11,"div",8)(12,"label",9),t._uU(13,"Name:"),t.qZA(),t._UZ(14,"input",10),t.qZA(),t.TgZ(15,"div",8)(16,"label",11),t._uU(17,"Last Name:"),t.qZA(),t._UZ(18,"input",12),t.qZA(),t.TgZ(19,"div",8)(20,"label",13),t._uU(21,"Email:"),t.qZA(),t._UZ(22,"input",14),t.qZA(),t.TgZ(23,"div",8)(24,"label",15),t._uU(25,"Password:"),t.qZA(),t._UZ(26,"input",16),t.qZA(),t.TgZ(27,"div",8)(28,"label",17),t._uU(29,"Role:"),t.qZA(),t._UZ(30,"input",18),t.qZA(),t.TgZ(31,"div",8)(32,"label",19),t._uU(33,"Type:"),t.qZA(),t._UZ(34,"input",20),t.qZA(),t.TgZ(35,"div",8)(36,"label",21),t._uU(37,"Status:"),t.qZA(),t._UZ(38,"input",22),t.qZA(),t.TgZ(39,"div",8)(40,"label",23),t._uU(41,"Address:"),t.qZA(),t._UZ(42,"input",24),t.qZA(),t.TgZ(43,"div",8)(44,"label",25),t._uU(45,"Address 2:"),t.qZA(),t._UZ(46,"input",26),t.qZA(),t.TgZ(47,"div",8)(48,"label",27),t._uU(49,"City:"),t.qZA(),t._UZ(50,"input",28),t.qZA(),t.TgZ(51,"div",8)(52,"label",29),t._uU(53,"State:"),t.qZA(),t._UZ(54,"input",30),t.qZA(),t.TgZ(55,"div",8)(56,"label",31),t._uU(57,"Zip Code:"),t.qZA(),t._UZ(58,"input",32),t.qZA(),t.TgZ(59,"div",8)(60,"label",33),t._uU(61,"Phone Number:"),t.qZA(),t._UZ(62,"input",34),t.qZA(),t.TgZ(63,"div",8)(64,"label",35),t._uU(65,"Date of Birth:"),t.qZA(),t._UZ(66,"input",36),t.qZA(),t.TgZ(67,"div",37)(68,"label",38),t._uU(69,"Bio:"),t.qZA(),t._UZ(70,"textarea",39),t.qZA(),t.TgZ(71,"div",37)(72,"label",40),t._uU(73,"To do list:"),t.qZA(),t._UZ(74,"textarea",41),t.qZA()(),t.TgZ(75,"button",42),t._uU(76,"Save"),t.qZA()()()),2&i&&(t.xp6(9),t.Q6J("formGroup",s.newUserForm))},dependencies:[a.rH,r._Y,r.Fj,r.JJ,r.JL,r.Q7,r.sg,r.u,c.Nt],styles:[".submit-button[_ngcontent-%COMP%]{background-color:#00b862;color:#000;font-weight:700;font-size:18px}"]})}return o})();var I=n(127);const N=function(o){return[o]};function w(o,u){if(1&o&&(t.TgZ(0,"button",8),t._uU(1," Edit "),t.qZA()),2&o){const e=t.oxw();t.Q6J("routerLink",t.VKq(1,N,"/admin/dashboard/users/up-user/"+e.user._id))}}function S(o,u){if(1&o&&(t.TgZ(0,"section",9)(1,"div",10)(2,"div",11)(3,"span",12),t._UZ(4,"i",13),t.qZA(),t.TgZ(5,"div",14),t._uU(6),t.qZA()(),t._UZ(7,"br"),t.TgZ(8,"div",15)(9,"div",16),t._uU(10),t.ALo(11,"formatDate"),t.qZA(),t.TgZ(12,"div",16),t._uU(13),t.qZA(),t.TgZ(14,"div",16),t._uU(15),t.qZA(),t.TgZ(16,"div",16),t._uU(17),t.qZA()(),t._UZ(18,"br"),t.TgZ(19,"div",17)(20,"div",16),t._uU(21),t.qZA(),t.TgZ(22,"div",16),t._uU(23),t.qZA(),t.TgZ(24,"div",16),t._uU(25),t.qZA()(),t.TgZ(26,"div",17)(27,"div",18),t._uU(28),t.qZA()(),t.TgZ(29,"div",17),t._UZ(30,"div",19),t.qZA()()()),2&o){const e=t.oxw();t.xp6(6),t.AsE(" ",e.user.name," ",e.user.lastName," "),t.xp6(4),t.hij("Birthday: ",t.lcZ(11,12,e.user.dob),""),t.xp6(3),t.hij("Email: ",e.user.email,""),t.xp6(2),t.hij("Address: ",e.user.address,""),t.xp6(2),t.AsE("City: ",e.user.city,", State: ",e.user.state,""),t.xp6(4),t.hij("Type: ",e.user.type,""),t.xp6(2),t.hij("Role: ",e.user.role,""),t.xp6(2),t.hij("status: ",e.user.status,""),t.xp6(3),t.hij("Bio: ",e.user.bio,""),t.xp6(2),t.Q6J("innerHTML",e.user.todo,t.oJD)}}let k=(()=>{class o{constructor(e,i,s){this.route=e,this.router=i,this.userService=s}ngOnInit(){this.id=this.route.snapshot.paramMap.get("id"),this.userService.getuserById(this.id).subscribe(e=>{this.user=e})}static#t=this.\u0275fac=function(i){return new(i||o)(t.Y36(a.gz),t.Y36(a.F0),t.Y36(l.K))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-user"]],decls:11,vars:2,consts:[[1,"admin-container"],[1,"admin-top-menu"],[1,"admin-top-menu-logo"],["src","../../../../assets/img/legion-logo.png","alt",""],[1,"admin-top-menu-buttons"],["routerLink","/admin/dashboard/users",1,"button"],["class","button",3,"routerLink",4,"ngIf"],["class","table-container",4,"ngIf"],[1,"button",3,"routerLink"],[1,"table-container"],[1,"profile-content"],[1,"general"],[1,"user"],[1,"fa-solid","fa-user-astronaut"],[1,"items","item-medium","general-text"],[1,"personal"],[1,"items","item-medium"],[1,"school"],[1,"items","item-large"],[1,"items","item-large",3,"innerHTML"]],template:function(i,s){1&i&&(t.TgZ(0,"section",0)(1,"section",1)(2,"div",2),t._UZ(3,"img",3),t.TgZ(4,"h2"),t._uU(5,"Profesor or Coach"),t.qZA()(),t.TgZ(6,"div",4)(7,"button",5),t._uU(8,"Back"),t.qZA(),t.YNc(9,w,2,3,"button",6),t.qZA()(),t.YNc(10,S,31,14,"section",7),t.qZA()),2&i&&(t.xp6(9),t.Q6J("ngIf",s.user),t.xp6(1),t.Q6J("ngIf",s.user))},dependencies:[d.O5,a.rH,I.i]})}return o})();var L=n(1862),F=n(2333),J=n(7700);const B=function(o){return[o]};function Y(o,u){if(1&o&&(t.TgZ(0,"button",44),t._uU(1," Profile "),t.qZA()),2&o){const e=t.oxw();t.Q6J("routerLink",t.VKq(1,B,"/admin/dashboard/users/user/"+e.coach._id))}}const z=[{path:"",component:y},{path:"new-user",component:C},{path:"user/:id",component:k},{path:"up-user/:id",component:(()=>{class o{constructor(e,i,s,m,Q,P){this.formBuilder=e,this.router=i,this.route=s,this.authService=m,this.userService=Q,this.dialog=P,this.isAdmin=!1,this.newUserForm=this.formBuilder.group({active:[!0,r.kI.required],address:[""],address2:[""],athletes:[[]],city:[""],dateSignedIn:[new Date,r.kI.required],dob:[""],email:["",[r.kI.required,r.kI.email]],emailVerified:[!0],lastName:["",r.kI.required],name:["",r.kI.required],phone:[""],photoURL:[""],role:["MEMBER",r.kI.required],state:[""],status:["active",r.kI.required],type:["professor",r.kI.required],bio:[""],todo:[""],waiver:[!0,r.kI.required],zip:[""]})}ngOnInit(){this.id=this.route.snapshot.paramMap.get("id");const e=this.authService.getCurrentUser();this.isAdmin=e&&"ADMIN"===e.role,this.userService.getuserById(this.id).subscribe({next:i=>{this.coach=i,this.newUserForm.patchValue({active:this.coach.active,address:this.coach.address,address2:this.coach.address2,athletes:this.coach.athletes,city:this.coach.city,dateSignedIn:new Date(this.coach.dateSignedIn),dob:this.coach.dob,email:this.coach.email,emailVerified:this.coach.emailVerified,lastName:this.coach.lastName,name:this.coach.name,phone:this.coach.phone,photoURL:this.coach.photoURL,role:this.coach.role,state:this.coach.state,status:this.coach.status,type:this.coach.type,bio:this.coach.bio,todo:this.coach.todo,waiver:this.coach.waiver,zip:this.coach.zip})},error:i=>{console.error("Error fetching coach",i)}})}onSubmit(){this.newUserForm.valid&&this.isAdmin?this.userService.updateUser(this.id,this.newUserForm.value).subscribe({next:e=>{this.router.navigate(["/admin/dashboard/users/user/",e.user._id])},error:e=>{console.error("Error updating user",e)}}):console.log("No User credentials or form is invalid")}deleteProgram(){this.dialog.open(L.$,{width:"300px"}).afterClosed().subscribe(i=>{i&&this.userService.deleteUser(this.route.snapshot.params.id).subscribe({next:()=>{this.router.navigate(["/admin/dashboard/users"])},error:m=>console.error(m)})})}static#t=this.\u0275fac=function(i){return new(i||o)(t.Y36(r.qu),t.Y36(a.F0),t.Y36(a.gz),t.Y36(F.e),t.Y36(l.K),t.Y36(J.uw))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-update-user"]],decls:78,vars:2,consts:[[1,"admin-container"],[1,"admin-top-menu"],[1,"admin-top-menu-logo"],["src","../../../../assets/img/legion-logo.png","alt",""],[1,"admin-top-menu-buttons"],["routerLink","/admin/dashboard",1,"button"],["routerLink","/admin/dashboard/users",1,"button"],["class","button",3,"routerLink",4,"ngIf"],[1,"red-button",3,"click"],[1,"form-new-add",3,"formGroup","ngSubmit"],[1,"form-new-add-top"],[1,"form-group"],["for","name"],["type","text","id","name","formControlName","name","matInput","","required","",1,"form-control"],["for","lastName"],["type","text","id","lastName","formControlName","lastName","matInput","","required","",1,"form-control"],["for","email"],["type","email","id","email","formControlName","email","matInput","","required","",1,"form-control"],["for","role"],["type","text","id","role","formControlName","role","matInput","","required","",1,"form-control"],["for","type"],["type","text","id","type","formControlName","type","matInput","","required","",1,"form-control"],["for","status"],["type","text","id","status","formControlName","status","matInput","","required","",1,"form-control"],["for","address"],["type","text","id","address","formControlName","address","matInput","",1,"form-control"],["for","address2"],["type","text","id","address2","formControlName","address2","matInput","",1,"form-control"],["for","city"],["type","text","id","city","formControlName","city","matInput","",1,"form-control"],["for","state"],["type","text","id","state","formControlName","state","matInput","",1,"form-control"],["for","zip"],["type","text","id","zip","formControlName","zip","matInput","",1,"form-control"],["for","phone"],["type","tel","id","phone","formControlName","phone","matInput","",1,"form-control"],["for","dob"],["type","date","id","dob","formControlName","dob","matInput","",1,"form-control"],[1,"form-group","form-group-texterea"],["for","bio"],["name","bio","id","bio","formControlName","bio"],["for","todo"],["name","todo","id","todo","formControlName","todo"],["type","submit",1,"submit-button"],[1,"button",3,"routerLink"]],template:function(i,s){1&i&&(t.TgZ(0,"section",0)(1,"section",1)(2,"div",2),t._UZ(3,"img",3),t.TgZ(4,"h2"),t._uU(5,"Update Coach or Professor"),t.qZA()(),t.TgZ(6,"div",4)(7,"button",5),t._uU(8,"Dashboard"),t.qZA(),t.TgZ(9,"button",6),t._uU(10,"Users"),t.qZA(),t.YNc(11,Y,2,3,"button",7),t.TgZ(12,"button",8),t.NdJ("click",function(){return s.deleteProgram()}),t._uU(13,"delete "),t.qZA()()(),t.TgZ(14,"form",9),t.NdJ("ngSubmit",function(){return s.onSubmit()}),t.TgZ(15,"section",10)(16,"div",11)(17,"label",12),t._uU(18,"Name:"),t.qZA(),t._UZ(19,"input",13),t.qZA(),t.TgZ(20,"div",11)(21,"label",14),t._uU(22,"Last Name:"),t.qZA(),t._UZ(23,"input",15),t.qZA(),t.TgZ(24,"div",11)(25,"label",16),t._uU(26,"Email:"),t.qZA(),t._UZ(27,"input",17),t.qZA(),t.TgZ(28,"div",11)(29,"label",18),t._uU(30,"Role:"),t.qZA(),t._UZ(31,"input",19),t.qZA(),t.TgZ(32,"div",11)(33,"label",20),t._uU(34,"Type:"),t.qZA(),t._UZ(35,"input",21),t.qZA(),t.TgZ(36,"div",11)(37,"label",22),t._uU(38,"Status:"),t.qZA(),t._UZ(39,"input",23),t.qZA(),t.TgZ(40,"div",11)(41,"label",24),t._uU(42,"Address:"),t.qZA(),t._UZ(43,"input",25),t.qZA(),t.TgZ(44,"div",11)(45,"label",26),t._uU(46,"Address 2:"),t.qZA(),t._UZ(47,"input",27),t.qZA(),t.TgZ(48,"div",11)(49,"label",28),t._uU(50,"City:"),t.qZA(),t._UZ(51,"input",29),t.qZA(),t.TgZ(52,"div",11)(53,"label",30),t._uU(54,"State:"),t.qZA(),t._UZ(55,"input",31),t.qZA(),t.TgZ(56,"div",11)(57,"label",32),t._uU(58,"Zip Code:"),t.qZA(),t._UZ(59,"input",33),t.qZA(),t.TgZ(60,"div",11)(61,"label",34),t._uU(62,"Phone Number:"),t.qZA(),t._UZ(63,"input",35),t.qZA(),t.TgZ(64,"div",11)(65,"label",36),t._uU(66,"Date of Birth:"),t.qZA(),t._UZ(67,"input",37),t.qZA(),t.TgZ(68,"div",38)(69,"label",39),t._uU(70,"Bio:"),t.qZA(),t._UZ(71,"textarea",40),t.qZA(),t.TgZ(72,"div",38)(73,"label",41),t._uU(74,"To do list:"),t.qZA(),t._UZ(75,"textarea",42),t.qZA()(),t.TgZ(76,"button",43),t._uU(77,"Save"),t.qZA()()()),2&i&&(t.xp6(11),t.Q6J("ngIf",s.coach),t.xp6(3),t.Q6J("formGroup",s.newUserForm))},dependencies:[d.O5,a.rH,r._Y,r.Fj,r.JJ,r.JL,r.Q7,r.sg,r.u,c.Nt],styles:[".submit-button[_ngcontent-%COMP%]{background-color:#00b862;color:#000;font-weight:700;font-size:18px}"]})}return o})()}];let E=(()=>{class o{static#t=this.\u0275fac=function(i){return new(i||o)};static#e=this.\u0275mod=t.oAB({type:o});static#o=this.\u0275inj=t.cJS({imports:[a.Bz.forChild(z),a.Bz]})}return o})();var j=n(682);let M=(()=>{class o{static#t=this.\u0275fac=function(i){return new(i||o)};static#e=this.\u0275mod=t.oAB({type:o});static#o=this.\u0275inj=t.cJS({imports:[d.ez,E,a.Bz,r.UX,r.u5,p.JX,c.c,h.lN,Z.LD,g.p9,U.Fk,j.G]})}return o})()}}]);