"use strict";(self.webpackChunkbjj_app=self.webpackChunkbjj_app||[]).push([[214],{9214:(D,f,s)=>{s.r(f),s.d(f,{UsersModule:()=>j});var l=s(6814),i=s(6223),a=s(4581),Z=s(8525),c=s(2032),g=s(5986),h=s(9157),U=s(324),t=s(5879),d=s(3076),p=s(6472),b=s(684);const _=function(o){return[o]};function q(o,u){if(1&o&&(t.TgZ(0,"li",11)(1,"div",12)(2,"div",13),t._uU(3),t.qZA(),t.TgZ(4,"div",14),t._uU(5),t.qZA(),t.TgZ(6,"div",15),t._uU(7),t.ALo(8,"truncateWords"),t.qZA(),t.TgZ(9,"div",16),t._uU(10),t.qZA()()()),2&o){const e=u.$implicit,r=u.index,n=t.oxw(2);t.Q6J("routerLink",t.VKq(8,_,"./user/"+e._id)),t.xp6(3),t.Oqu(15*(n.page-1)+r+1),t.xp6(2),t.AsE("",e.name," ",e.lastName,""),t.xp6(2),t.Oqu(t.lcZ(8,6,e.type)),t.xp6(3),t.Oqu(e.role)}}function A(o,u){if(1&o){const e=t.EpF();t.TgZ(0,"pagination-controls",19),t.NdJ("pageChange",function(n){t.CHM(e);const m=t.oxw(3);return t.KtG(m.page=n)}),t.qZA()}}function v(o,u){if(1&o&&(t.TgZ(0,"div",17),t.YNc(1,A,1,0,"pagination-controls",18),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",0!=e.total)}}const T=function(o,u){return{itemsPerPage:15,currentPage:o,totalItems:u}};function y(o,u){if(1&o&&(t.TgZ(0,"section",7)(1,"ul",8),t.YNc(2,q,11,10,"li",9),t.ALo(3,"paginate"),t.qZA(),t.YNc(4,v,2,1,"div",10),t.qZA()),2&o){const e=t.oxw();t.xp6(2),t.Q6J("ngForOf",t.xi3(3,2,e.users,t.WLB(5,T,e.page,e.total))),t.xp6(2),t.Q6J("ngIf",e.users)}}let x=(()=>{class o{constructor(e){this.userService=e,this.error=null,this.users=[],this.total=0,this.page=1}ngOnInit(){this.fetchUsers()}fetchUsers(){this.userService.getusers().subscribe({next:e=>{this.users=e,this.total=this.users.length},error:e=>{console.error("Error al cargar los programas",e),this.error="Error al cargar los programas"}})}static#t=this.\u0275fac=function(r){return new(r||o)(t.Y36(d.K))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-users"]],decls:10,vars:1,consts:[[1,"admin-container"],[1,"admin-top-menu"],[1,"admin-top-menu-logo"],["src","../../../../assets/img/legion-logo.png","alt",""],[1,"admin-top-menu-buttons"],["routerLink","./new-user/",1,"button"],["class","table-container",4,"ngIf"],[1,"table-container"],[1,"table-list"],[3,"routerLink",4,"ngFor","ngForOf"],["class","p-controls",4,"ngIf"],[3,"routerLink"],[1,"item-box"],[1,"item-index-number","item-xsmall"],[1,"items","item-medium"],[1,"items","item-large"],[1,"items","item-small"],[1,"p-controls"],[3,"pageChange",4,"ngIf"],[3,"pageChange"]],template:function(r,n){1&r&&(t.TgZ(0,"section",0)(1,"section",1)(2,"div",2),t._UZ(3,"img",3),t.TgZ(4,"h2"),t._uU(5,"Flow305 Staff"),t.qZA()(),t.TgZ(6,"div",4)(7,"button",5),t._uU(8,"New Coach"),t.qZA()()(),t.YNc(9,y,5,8,"section",6),t.qZA()),2&r&&(t.xp6(9),t.Q6J("ngIf",n.users))},dependencies:[l.sg,l.O5,a.rH,p.LS,p._s,b.d]})}return o})(),C=(()=>{class o{constructor(e,r,n){this.formBuilder=e,this.router=r,this.userService=n,this.newUserForm=this.formBuilder.group({active:[!0,i.kI.required],address:[""],address2:[""],athletes:[[]],city:[""],dateSignedIn:[new Date,i.kI.required],dob:[""],email:[""],emailVerified:[!0],lastName:["",i.kI.required],name:["",i.kI.required],phone:[""],photoURL:[""],role:["MEMBER",i.kI.required],classPay:[0],signature:[""],state:[""],status:["active",i.kI.required],type:["",i.kI.required],bio:[""],todo:[""],zip:[""]})}onSubmit(){this.userService.createuser(this.newUserForm.value).subscribe(()=>{console.log("new user created"),this.router.navigate(["/admin/dashboard/users"])})}static#t=this.\u0275fac=function(r){return new(r||o)(t.Y36(i.qu),t.Y36(a.F0),t.Y36(d.K))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-new-user"]],decls:77,vars:1,consts:[[1,"admin-container"],[1,"admin-top-menu"],[1,"admin-top-menu-logo"],["src","../../../../assets/img/legion-logo.png","alt",""],[1,"admin-top-menu-buttons"],["routerLink","/admin/dashboard/users",1,"button"],["autocomplete","off",1,"form-new-add",3,"formGroup","ngSubmit"],[1,"form-new-add-top"],[1,"form-group"],["for","name"],["type","text","id","name","formControlName","name","matInput","","required","",1,"form-control"],["for","lastName"],["type","text","id","lastName","formControlName","lastName","matInput","","required","",1,"form-control"],["for","email"],["type","email","id","email","formControlName","email","matInput","","required","",1,"form-control"],["for","role"],["type","text","id","role","formControlName","role","matInput","","required","",1,"form-control"],["for","type"],["type","text","id","type","formControlName","type","matInput","","required","",1,"form-control"],["for","classPay"],["type","number","id","classPay","formControlName","classPay","matInput","","required","",1,"form-control"],["for","status"],["type","text","id","status","formControlName","status","matInput","","required","",1,"form-control"],["for","address"],["type","text","id","address","formControlName","address","matInput","",1,"form-control"],["for","address2"],["type","text","id","address2","formControlName","address2","matInput","",1,"form-control"],["for","city"],["type","text","id","city","formControlName","city","matInput","",1,"form-control"],["for","state"],["type","text","id","state","formControlName","state","matInput","",1,"form-control"],["for","zip"],["type","text","id","zip","formControlName","zip","matInput","",1,"form-control"],["for","phone"],["type","tel","id","phone","formControlName","phone","matInput","",1,"form-control"],["for","dob"],["type","date","id","dob","formControlName","dob","matInput","",1,"form-control"],[1,"form-group","form-group-texterea"],["for","bio"],["name","bio","id","bio","formControlName","bio"],["for","todo"],["name","todo","id","todo","formControlName","todo"],["type","submit",1,"submit-button"]],template:function(r,n){1&r&&(t.TgZ(0,"section",0)(1,"section",1)(2,"div",2),t._UZ(3,"img",3),t.TgZ(4,"h2"),t._uU(5,"New Coach or Professor"),t.qZA()(),t.TgZ(6,"div",4)(7,"button",5),t._uU(8,"Back"),t.qZA()()(),t.TgZ(9,"form",6),t.NdJ("ngSubmit",function(){return n.onSubmit()}),t.TgZ(10,"section",7)(11,"div",8)(12,"label",9),t._uU(13,"Name:"),t.qZA(),t._UZ(14,"input",10),t.qZA(),t.TgZ(15,"div",8)(16,"label",11),t._uU(17,"Last Name:"),t.qZA(),t._UZ(18,"input",12),t.qZA(),t.TgZ(19,"div",8)(20,"label",13),t._uU(21,"Email:"),t.qZA(),t._UZ(22,"input",14),t.qZA(),t.TgZ(23,"div",8)(24,"label",15),t._uU(25,"Role:"),t.qZA(),t._UZ(26,"input",16),t.qZA(),t.TgZ(27,"div",8)(28,"label",17),t._uU(29,"Type:"),t.qZA(),t._UZ(30,"input",18),t.qZA(),t.TgZ(31,"div",8)(32,"label",19),t._uU(33,"Class pay:"),t.qZA(),t._UZ(34,"input",20),t.qZA(),t.TgZ(35,"div",8)(36,"label",21),t._uU(37,"Status:"),t.qZA(),t._UZ(38,"input",22),t.qZA(),t.TgZ(39,"div",8)(40,"label",23),t._uU(41,"Address:"),t.qZA(),t._UZ(42,"input",24),t.qZA(),t.TgZ(43,"div",8)(44,"label",25),t._uU(45,"Address 2:"),t.qZA(),t._UZ(46,"input",26),t.qZA(),t.TgZ(47,"div",8)(48,"label",27),t._uU(49,"City:"),t.qZA(),t._UZ(50,"input",28),t.qZA(),t.TgZ(51,"div",8)(52,"label",29),t._uU(53,"State:"),t.qZA(),t._UZ(54,"input",30),t.qZA(),t.TgZ(55,"div",8)(56,"label",31),t._uU(57,"Zip Code:"),t.qZA(),t._UZ(58,"input",32),t.qZA(),t.TgZ(59,"div",8)(60,"label",33),t._uU(61,"Phone Number:"),t.qZA(),t._UZ(62,"input",34),t.qZA(),t.TgZ(63,"div",8)(64,"label",35),t._uU(65,"Date of Birth:"),t.qZA(),t._UZ(66,"input",36),t.qZA(),t.TgZ(67,"div",37)(68,"label",38),t._uU(69,"Bio:"),t.qZA(),t._UZ(70,"textarea",39),t.qZA(),t.TgZ(71,"div",37)(72,"label",40),t._uU(73,"To do list:"),t.qZA(),t._UZ(74,"textarea",41),t.qZA()(),t.TgZ(75,"button",42),t._uU(76,"Save"),t.qZA()()()),2&r&&(t.xp6(9),t.Q6J("formGroup",n.newUserForm))},dependencies:[a.rH,i._Y,i.Fj,i.wV,i.JJ,i.JL,i.Q7,i.sg,i.u,c.Nt],styles:[".submit-button[_ngcontent-%COMP%]{background-color:#00b862;color:#000;font-weight:700;font-size:18px}"]})}return o})();var N=s(127);const I=function(o){return[o]};function w(o,u){if(1&o&&(t.TgZ(0,"button",8),t._uU(1," Edit "),t.qZA()),2&o){const e=t.oxw();t.Q6J("routerLink",t.VKq(1,I,"/admin/dashboard/users/up-user/"+e.user._id))}}function S(o,u){if(1&o&&(t.TgZ(0,"section",9)(1,"div",10)(2,"div",11)(3,"span",12),t._UZ(4,"i",13),t.qZA(),t.TgZ(5,"div",14),t._uU(6),t.qZA()(),t._UZ(7,"br"),t.TgZ(8,"div",15)(9,"div",16),t._uU(10),t.ALo(11,"formatDate"),t.qZA(),t.TgZ(12,"div",16),t._uU(13),t.qZA(),t.TgZ(14,"div",16),t._uU(15),t.qZA(),t.TgZ(16,"div",16),t._uU(17),t.qZA()(),t._UZ(18,"br"),t.TgZ(19,"div",17)(20,"div",16),t._uU(21),t.qZA(),t.TgZ(22,"div",16),t._uU(23),t.qZA(),t.TgZ(24,"div",16),t._uU(25),t.qZA(),t.TgZ(26,"div",16),t._uU(27),t.qZA()(),t.TgZ(28,"div",17)(29,"div",18),t._uU(30),t.qZA()(),t.TgZ(31,"div",17),t._UZ(32,"div",19),t.qZA()()()),2&o){const e=t.oxw();t.xp6(6),t.AsE(" ",e.user.name," ",e.user.lastName," "),t.xp6(4),t.hij("Birthday: ",t.lcZ(11,13,e.user.dob),""),t.xp6(3),t.hij("Email: ",e.user.email,""),t.xp6(2),t.hij("Address: ",e.user.address,""),t.xp6(2),t.AsE("City: ",e.user.city,", State: ",e.user.state,""),t.xp6(4),t.hij("Type: ",e.user.type,""),t.xp6(2),t.hij("Role: ",e.user.role,""),t.xp6(2),t.hij("Status: ",e.user.status,""),t.xp6(2),t.hij("Cost per Class: $",e.user.classPay,""),t.xp6(3),t.hij("Bio: ",e.user.bio,""),t.xp6(2),t.Q6J("innerHTML",e.user.todo,t.oJD)}}let k=(()=>{class o{constructor(e,r,n){this.route=e,this.router=r,this.userService=n}ngOnInit(){this.id=this.route.snapshot.paramMap.get("id"),this.userService.getuserById(this.id).subscribe(e=>{this.user=e})}static#t=this.\u0275fac=function(r){return new(r||o)(t.Y36(a.gz),t.Y36(a.F0),t.Y36(d.K))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-user"]],decls:11,vars:2,consts:[[1,"admin-container"],[1,"admin-top-menu"],[1,"admin-top-menu-logo"],["src","../../../../assets/img/legion-logo.png","alt",""],[1,"admin-top-menu-buttons"],["routerLink","/admin/dashboard/users",1,"button"],["class","button",3,"routerLink",4,"ngIf"],["class","table-container",4,"ngIf"],[1,"button",3,"routerLink"],[1,"table-container"],[1,"profile-content"],[1,"general"],[1,"user"],[1,"fa-solid","fa-user-astronaut"],[1,"items","item-medium","general-text"],[1,"personal"],[1,"items","item-medium"],[1,"school"],[1,"items","item-large"],[1,"items","item-large",3,"innerHTML"]],template:function(r,n){1&r&&(t.TgZ(0,"section",0)(1,"section",1)(2,"div",2),t._UZ(3,"img",3),t.TgZ(4,"h2"),t._uU(5,"Profesor or Coach"),t.qZA()(),t.TgZ(6,"div",4)(7,"button",5),t._uU(8,"Back"),t.qZA(),t.YNc(9,w,2,3,"button",6),t.qZA()(),t.YNc(10,S,33,15,"section",7),t.qZA()),2&r&&(t.xp6(9),t.Q6J("ngIf",n.user),t.xp6(1),t.Q6J("ngIf",n.user))},dependencies:[l.O5,a.rH,N.i]})}return o})();var L=s(1862),J=s(2333),P=s(7700);const F=function(o){return[o]};function Y(o,u){if(1&o&&(t.TgZ(0,"button",48),t._uU(1," Profile "),t.qZA()),2&o){const e=t.oxw();t.Q6J("routerLink",t.VKq(1,F,"/admin/dashboard/users/user/"+e.coach._id))}}function B(o,u){if(1&o){const e=t.EpF();t.TgZ(0,"button",49),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.newPass())}),t._uU(1,"up-pass "),t.qZA()}}const z=[{path:"",component:x},{path:"new-user",component:C},{path:"user/:id",component:k},{path:"up-user/:id",component:(()=>{class o{constructor(e,r,n,m,Q,O){this.formBuilder=e,this.router=r,this.route=n,this.authService=m,this.userService=Q,this.dialog=O,this.isAdmin=!1,this.newUserForm=this.formBuilder.group({active:[!0,i.kI.required],address:[""],address2:[""],athletes:[[]],city:[""],dateSignedIn:[new Date,i.kI.required],dob:[""],email:["",[i.kI.required,i.kI.email]],emailVerified:[!0],lastName:["",i.kI.required],name:["",i.kI.required],phone:[""],photoURL:[""],role:["MEMBER",i.kI.required],classPay:[],state:[""],status:["",i.kI.required],type:[""],bio:[""],todo:[""],waiver:[!0,i.kI.required],zip:[""]})}ngOnInit(){this.id=this.route.snapshot.paramMap.get("id");const e=this.authService.getCurrentUser();this.isAdmin=e&&"ADMIN"===e.role,this.userService.getuserById(this.id).subscribe({next:r=>{this.coach=r,this.newUserForm.patchValue({active:this.coach.active,address:this.coach.address,address2:this.coach.address2,athletes:this.coach.athletes,city:this.coach.city,dateSignedIn:new Date(this.coach.dateSignedIn),dob:this.coach.dob,email:this.coach.email,emailVerified:this.coach.emailVerified,lastName:this.coach.lastName,name:this.coach.name,phone:this.coach.phone,photoURL:this.coach.photoURL,role:this.coach.role,classPay:this.coach.classPay,state:this.coach.state,status:this.coach.status,type:this.coach.type,bio:this.coach.bio,todo:this.coach.todo,waiver:this.coach.waiver,zip:this.coach.zip})},error:r=>{console.error("Error fetching coach",r)}})}onSubmit(){this.userService.updateUser(this.id,this.newUserForm.value).subscribe({next:e=>{this.router.navigate(["/admin/dashboard/users/user/",e.user._id])},error:e=>{console.error("Error updating user",e)}})}deleteProgram(){this.dialog.open(L.$,{width:"300px"}).afterClosed().subscribe(r=>{r&&this.userService.deleteUser(this.route.snapshot.params.id).subscribe({next:()=>{this.router.navigate(["/admin/dashboard/users"])},error:m=>console.error(m)})})}newPass(){}static#t=this.\u0275fac=function(r){return new(r||o)(t.Y36(i.qu),t.Y36(a.F0),t.Y36(a.gz),t.Y36(J.e),t.Y36(d.K),t.Y36(P.uw))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-update-user"]],decls:83,vars:3,consts:[[1,"admin-container"],[1,"admin-top-menu"],[1,"admin-top-menu-logo"],["src","../../../../assets/img/legion-logo.png","alt",""],[1,"admin-top-menu-buttons"],["routerLink","/admin/dashboard",1,"button"],["routerLink","/admin/dashboard/users",1,"button"],["class","button",3,"routerLink",4,"ngIf"],["class","yellow-button",3,"click",4,"ngIf"],[1,"red-button",3,"click"],[1,"form-new-add",3,"formGroup","ngSubmit"],[1,"form-new-add-top"],[1,"form-group"],["for","name"],["type","text","id","name","formControlName","name","matInput","","required","",1,"form-control"],["for","lastName"],["type","text","id","lastName","formControlName","lastName","matInput","","required","",1,"form-control"],["for","email"],["type","email","id","email","formControlName","email","matInput","","required","",1,"form-control"],["for","role"],["type","text","id","role","formControlName","role","matInput","","required","",1,"form-control"],["for","type"],["type","text","id","type","formControlName","type","matInput","","required","",1,"form-control"],["for","classPay"],["type","number","id","classPay","formControlName","classPay","matInput","","required","",1,"form-control"],["for","status"],["type","text","id","status","formControlName","status","matInput","","required","",1,"form-control"],["for","address"],["type","text","id","address","formControlName","address","matInput","",1,"form-control"],["for","address2"],["type","text","id","address2","formControlName","address2","matInput","",1,"form-control"],["for","city"],["type","text","id","city","formControlName","city","matInput","",1,"form-control"],["for","state"],["type","text","id","state","formControlName","state","matInput","",1,"form-control"],["for","zip"],["type","text","id","zip","formControlName","zip","matInput","",1,"form-control"],["for","phone"],["type","tel","id","phone","formControlName","phone","matInput","",1,"form-control"],["for","dob"],["type","date","id","dob","formControlName","dob","matInput","",1,"form-control"],[1,"form-group","form-group-texterea"],["for","bio"],["name","bio","id","bio","formControlName","bio"],[1,"form-group","form-group-texterea","todo-list"],["for","todo"],["name","todo","id","todo","formControlName","todo"],["type","submit",1,"submit-button"],[1,"button",3,"routerLink"],[1,"yellow-button",3,"click"]],template:function(r,n){1&r&&(t.TgZ(0,"section",0)(1,"section",1)(2,"div",2),t._UZ(3,"img",3),t.TgZ(4,"h2"),t._uU(5,"Update Coach or Professor"),t.qZA()(),t.TgZ(6,"div",4)(7,"button",5),t._uU(8,"Dashboard"),t.qZA(),t.TgZ(9,"button",6),t._uU(10,"Users"),t.qZA(),t.YNc(11,Y,2,3,"button",7),t.YNc(12,B,2,0,"button",8),t.TgZ(13,"button",9),t.NdJ("click",function(){return n.deleteProgram()}),t._uU(14,"delete "),t.qZA()()(),t.TgZ(15,"form",10),t.NdJ("ngSubmit",function(){return n.onSubmit()}),t.TgZ(16,"section",11)(17,"div",12)(18,"label",13),t._uU(19,"Name:"),t.qZA(),t._UZ(20,"input",14),t.qZA(),t.TgZ(21,"div",12)(22,"label",15),t._uU(23,"Last Name:"),t.qZA(),t._UZ(24,"input",16),t.qZA(),t.TgZ(25,"div",12)(26,"label",17),t._uU(27,"Email:"),t.qZA(),t._UZ(28,"input",18),t.qZA(),t.TgZ(29,"div",12)(30,"label",19),t._uU(31,"Role:"),t.qZA(),t._UZ(32,"input",20),t.qZA(),t.TgZ(33,"div",12)(34,"label",21),t._uU(35,"Type:"),t.qZA(),t._UZ(36,"input",22),t.qZA(),t.TgZ(37,"div",12)(38,"label",23),t._uU(39,"Class pay:"),t.qZA(),t._UZ(40,"input",24),t.qZA(),t.TgZ(41,"div",12)(42,"label",25),t._uU(43,"Status:"),t.qZA(),t._UZ(44,"input",26),t.qZA(),t.TgZ(45,"div",12)(46,"label",27),t._uU(47,"Address:"),t.qZA(),t._UZ(48,"input",28),t.qZA(),t.TgZ(49,"div",12)(50,"label",29),t._uU(51,"Address 2:"),t.qZA(),t._UZ(52,"input",30),t.qZA(),t.TgZ(53,"div",12)(54,"label",31),t._uU(55,"City:"),t.qZA(),t._UZ(56,"input",32),t.qZA(),t.TgZ(57,"div",12)(58,"label",33),t._uU(59,"State:"),t.qZA(),t._UZ(60,"input",34),t.qZA(),t.TgZ(61,"div",12)(62,"label",35),t._uU(63,"Zip Code:"),t.qZA(),t._UZ(64,"input",36),t.qZA(),t.TgZ(65,"div",12)(66,"label",37),t._uU(67,"Phone Number:"),t.qZA(),t._UZ(68,"input",38),t.qZA(),t.TgZ(69,"div",12)(70,"label",39),t._uU(71,"Date of Birth:"),t.qZA(),t._UZ(72,"input",40),t.qZA(),t.TgZ(73,"div",41)(74,"label",42),t._uU(75,"Bio:"),t.qZA(),t._UZ(76,"textarea",43),t.qZA(),t.TgZ(77,"div",44)(78,"label",45),t._uU(79,"To do list:"),t.qZA(),t._UZ(80,"textarea",46),t.qZA()(),t.TgZ(81,"button",47),t._uU(82,"Save"),t.qZA()()()),2&r&&(t.xp6(11),t.Q6J("ngIf",n.coach),t.xp6(1),t.Q6J("ngIf",n.coach&&"ADMIN"===n.coach.role),t.xp6(3),t.Q6J("formGroup",n.newUserForm))},dependencies:[l.O5,a.rH,i._Y,i.Fj,i.wV,i.JJ,i.JL,i.Q7,i.sg,i.u,c.Nt],styles:[".submit-button[_ngcontent-%COMP%]{background-color:#00b862;color:#000;font-weight:700;font-size:18px}.yellow-button[_ngcontent-%COMP%]{background-color:#ffb554;color:#000;font-weight:600}"]})}return o})()}];let M=(()=>{class o{static#t=this.\u0275fac=function(r){return new(r||o)};static#e=this.\u0275mod=t.oAB({type:o});static#o=this.\u0275inj=t.cJS({imports:[a.Bz.forChild(z),a.Bz]})}return o})();var E=s(682);let j=(()=>{class o{static#t=this.\u0275fac=function(r){return new(r||o)};static#e=this.\u0275mod=t.oAB({type:o});static#o=this.\u0275inj=t.cJS({imports:[l.ez,M,a.Bz,i.UX,i.u5,p.JX,c.c,h.lN,Z.LD,g.p9,U.Fk,E.G]})}return o})()}}]);